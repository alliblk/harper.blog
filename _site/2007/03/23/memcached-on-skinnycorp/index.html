<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
    <meta charset="utf-8">
    <title> Memcached on skinnyCorp |  Harper Reed: Technology and death metal</title>
    <meta name="description" content="Hacking, Baphomet and the real time internet" />
    <meta name="keywords" content="" />
    <meta name="author" content="Harper Reed: harper@nata2.org">
    <meta name="robots" content="noodp,noydir" />
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="/css/bootstrap.min.css?9" rel="stylesheet">
    <link href="/css/styles.css?9" rel="stylesheet">
    
    <link href="/css/bootstrap-responsive.css?7" rel="stylesheet">
    
    <META name="verify-v1" content="bxsrf6C7p0+qY6MxNCbSNSGdkeDA8dQSxjTsNJu4Sa0=" />
    <link rel="openid.server" href="http://www.myopenid.com/server" />
    <meta name="myid" content="0eda4814-55e0-4756-bf30-0f1bf5a4b469" />
    <link rel="openid.delegate" href="http://harper.myopenid.com/" />
    <link href="http://feeds.feedburner.com/HarperReed" rel="alternate" title="Harper Reed: Technology and death metal" type="application/atom+xml" />
    <link rel="shortcut icon" href="/favicon.ico">
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="offset2 span8 header"><h1><a href="http://www.nata2.org">Harper Reed: Technology and death metal</a></h1>
<small>Hacking, Baphomet and the real time internet</small>
</div>
      </div>
      <hr class="offset2 span8" /> 
      <div class="row">
        <div class="offset2 span8 muted well-small well"> <a href="http://en.wikipedia.org/wiki/Hacker_(programmer_subculture)" target="_blank"><img style="padding-right: 5px; margin: 0px" src="http://media.nata2.org/images/glider.png" align="left"></a>

<strong>Hi.</strong> I am an engineer who builds paradigm-shifting tech and leads others to do the same. I love using the enormity of the Internet to bring people together, whether as CTO of Obama for America, CTO at Threadless.com, or on my own projects. You can often find me playing with new technology, looking for something to hack, or enjoying life in Chicago with my amazing wife, Hiromi. Check out my <a href="http://harperreed.org">homepage</a> and <a href="https://twitter.com/intent/follow?screen_name=harper" target="_blank">follow me on twitter</a>.
</div>
      </div>
      <div class="row">
        <div class="offset2 span8 "><div class="post" style="padding-bottom: 50px;">
  <div >
    <h1 ><a title="Permanent Link to Memcached on skinnyCorp." href="/2007/03/23/memcached-on-skinnycorp/" rel="bookmark">Memcached on skinnyCorp</a> <br /><small>Posted on Mar 23, 2007</small></h1>
  </div>
  <div class="postcontent">
    <p><a href="http://www.flickr.com/photos/natatwo/430540094/" title="Photo Sharing"><img src="http://farm1.static.flickr.com/157/430540094_11dc4ca8c8_m.jpg" alt="Memcache versus Diskcache" align="right" height="240" width="168" /></a>In the last year or so Threadless has grown insanely. When I started in 2005, we had around 2 servers and a bundle of downtime. Now, just a year and a half later we have an assload of servers and haven't had any load based downtime in almost 6 months. Its awesome. We have really been striving to keep our server infrastructure two steps ahead of our traffic. It really makes a difference when we get slammed and our servers don't even grown. I love it.</p>

<p>So part of my daily routine of making sure we continue on this path is to constantly keep on the lookout for cool tech that will make our shit FAST. The newest one is <a href="http://www.danga.com/memcached/">memcached</a>. a opensource product made by the <a href="http://www.danga.com/">danga interactive</a>. Danga is the company that started livejournal and created a bunch of neat tools for making scalable websites.</p>

<p>I am using it with PHP and our caching class. It is pretty easy to use. We set up a memcached box with a bundle of ram, ran a couple memcached servers on it and then hook into it with the <a href="http://pecl.php.net/package/memcache">PHP pecl extension for memcached</a>. The speed of the cache is madness. We tested it with a bunch of queries and were really impressed with the increase in speed. its nuts.</p>

<p>I have released a screen capture of our test here: <a href="http://flickr.com/photo_zoom.gne?id=430540094">http://flickr.com/photo_zoom.gne?id=430540094</a>. The test results are thus:</p>

<blockquote>Cached read from shared nfs disk: 0.0032 seconds
Cached read from local disk: 0.0018 seconds
Cached read from memcached: 0.00042 seconds</blockquote>


<p>As you can see, memcached is a bit faster. ;)</p>

<p>The test was simply executing a largish query and caching it, then reading the results from the cache, then clearing the cached results.</p>

<p>We are using a modified object cache I made a minute ago. It is based off my <a href="http://code.google.com/p/nata2/wiki/ObjectbaseClass">ObjectBase class</a> but made to emulate memcached. So it will work with or without a memcached server, which allows us to roll out the infrastructure and then just turn on the memcached servers for better performance. You can check out the <a href="http://nata2.googlecode.com/svn/branches/objectbase_class/class.objectbase.php">source here</a>. I will be releasing it once its a bit more solid.</p>

<p>I can't wait until we integrate it with all of our sites. I will be so happy and our sites will be rather snappy!</p>

<p class="wlWriterSmartContent" id="0767317B-992E-4b12-91E0-4F059A8CECA8:4c5a770a-1cda-46bb-9b04-ba2e669bdc2e" contenteditable="false" style="margin: 0px; padding: 0px; display: inline">[tags]memcached, skinnycorp, threadless, php[/tags]</p>


  </div>
</div>
</div>
      </div>
      <div class="row">
        <div class="offset2 span8 "><hr />

<p><a href="/">nata2.org</a> is &copy; 1997-2012 <a href="https://www.harperreed.org/contact/">Harper Reed</a> (<a href="http://harperreed.org/contact">contact</a>). Powered by <a href="http://jekyllrb.com/">Jekyll</a>, <a href="http://www.vim.org/">vim</a>, <a href="https://en.wikipedia.org/wiki/Markdown">markdown</a> and magic</p>
</div>
      </div>
    </div> <!-- /container -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.8/jquery-ui.min.js"></script>

<script type="text/javascript" src="http://media.nata2.org/js/scripts.js?9"></script>

 
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-70650-9");
pageTracker._trackPageview();
} catch(err) {}
</script>
 

<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/harper.json?callback=twitterCallback2&amp;count=8"></script>

<script type="text/javascript">
//<![CDATA[
(function() {
    var links = document.getElementsByTagName('a');
    var query = '?';
    for(var i = 0; i < links.length; i++) {
    if(links[i].href.indexOf('#disqus_thread') >= 0) {
        query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
    }
    }
    document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/nata2/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>

<script type="text/javascript">
var _sf_async_config={uid:5483,domain:"nata2.org"};
(function(){
  function loadChartbeat() {
    window._sf_endpt=(new Date()).getTime();
    var e = document.createElement('script');
    e.setAttribute('language', 'javascript');
    e.setAttribute('type', 'text/javascript');
    e.setAttribute('src',
       (("https:" == document.location.protocol) ? "https://s3.amazonaws.com/" : "http://") +
       "static.chartbeat.com/js/chartbeat.js");
    document.body.appendChild(e);
  }
  var oldonload = window.onload;
  window.onload = (typeof window.onload != 'function') ?
     loadChartbeat : function() { oldonload(); loadChartbeat(); };
})();
</script>

  </body>
</html>

</body>
</html>
