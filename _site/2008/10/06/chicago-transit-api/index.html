<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
    <meta charset="utf-8">
    <title> Chicago Transit API |  Harper Reed: Technology and death metal</title>
    <meta name="description" content="Hacking, Baphomet and the real time internet" />
    <meta name="keywords" content="" />
    <meta name="author" content="Harper Reed: harper@nata2.org">
    <meta name="robots" content="noodp,noydir" />
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="/css/bootstrap.min.css?8" rel="stylesheet">
    <link href="/css/styles.css?8" rel="stylesheet">
    
    <link href="/css/bootstrap-responsive.css?7" rel="stylesheet">
    
    <META name="verify-v1" content="bxsrf6C7p0+qY6MxNCbSNSGdkeDA8dQSxjTsNJu4Sa0=" />
    <link rel="openid.server" href="http://www.myopenid.com/server" />
    <meta name="myid" content="0eda4814-55e0-4756-bf30-0f1bf5a4b469" />
    <link rel="openid.delegate" href="http://harper.myopenid.com/" />
    <link href="http://feeds.feedburner.com/HarperReed" rel="alternate" title="Harper Reed: Technology and death metal" type="application/atom+xml" />
    <link rel="shortcut icon" href="/favicon.ico">
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="span10 header"><h1><a href="http://www.nata2.org">Harper Reed: Technology and death metal</a></h1>
<small>Hacking, Baphomet and the real time internet</small>
</div>
      </div>
      <hr class="span10 " /> 
      <div class="row">
        <div class="span7 "><div class="post" style="padding-bottom: 50px;">
  <div class="posthead">
    <h1 class="title"><a title="Permanent Link to Chicago Transit API." href="/2008/10/06/chicago-transit-api/" rel="bookmark">Chicago Transit API</a></h1>
    <p class="postdate">
    <strong class="day">06</strong>
    <strong class="month">Oct</strong>
    </p>
    <p class="postinfo">Written by <a href="/about/">harper</a> on Oct 06 2008</p>
  </div>
  <div class="postcontent">
    <p><a title="The goddamn damon bus. seriously by nata2, on Flickr" href="http://www.flickr.com/photos/natatwo/264290817/"><img class="alignright" src="http://farm1.static.flickr.com/87/264290817_f5ccf294d0_m.jpg" alt="The goddamn damon bus. seriously" width="240" height="180" align="right" /></a>I have been working hard to release the work that I have been doing to expose some of the more interesting real time data about chicago transit. Currently it is very bus-centric, but that is hopefully changing.</p>

<p>The genesis for this API is some work I did awhile ago reverse engineering the <a href="http://ctabustracker.com/bustime/map/displaymap.jsp">CTA Bus Tracker mashup</a>. I was able to expose the endpoints that powered their google maps mashup. In its original state - you can get some pretty awesome functionality and data. I am attempting to clean it up and make it more robust.</p>

<p>The native endpoints thus far are:</p>

<ul>
    <li><a href="http://chicago.transitapi.com/bustime/map/getRoutePoints.jsp?route=49">getRoutePoints</a>: Returns latitude/longitude, stop IDs, and stop names for bus stops along a particular route.</li>
    <li><a href="http://chicago.transitapi.com/bustime/map/getPatternPoints.jsp?route=20&amp;pattern=959">getPatternPoints</a>:</li>
    <li><a href="http://chicago.transitapi.com/bustime/map/getStopPredictions.jsp?stop=8207&amp;route=49">getStopPredictions</a>: Gets stop predictions. Timing and whatnot.</li>
    <li><a href="http://chicago.transitapi.com/bustime/map/getBusPredictions.jsp?bus=6654">getBusPredictions</a>: Returns arrival predictions for a particular bus.</li>
    <li><a href="http://chicago.transitapi.com/bustime/map/getBusesForRoute.jsp?route=49">getBusesForRoute</a>: Gets buses for specific route</li>
    <li><a href="http://chicago.transitapi.com/bustime/map/getBusesForRouteAll.jsp">getBusesForRouteAll</a>: Gets information about every bus in the system.</li>
    <li><a href="http://chicago.transitapi.com/bustime/map/schedules.jsp?agency=1&amp;route=92">Schedule</a>: Download the Schedule (pdf! w00t)</li>
    <li><a href="http://chicago.transitapi.com/bustime/map/getTimeAndTemp.jsp">getTimeAndTemp</a>: Outputs the current time and temp</li>
</ul>


<p>I have created a proxy for the endpoints that will do some caching and hopefully alleviate any crazy load the CTA servers would have if this API becomes popular.</p>

<p>I also did some work to push the UPOC alerts from the CTA riders community into a usable form. That endpoint is the first of hopefully many that can be used to grab real time information about the CTA. You can access it at:</p>

<ul>
    <li><a href="http://chicago.transitapi.com/api/alerts/upoc/latest/">Community Upoc alerts</a>: Outputs the last alert sent from the UPOC group</li>
</ul>


<p>Dan X O'Neil and myself hacked these alerts into the <a href="http://twitter.com/ctatweet">CTA Tweet bot</a> that sends CTA updates via twitter. Pretty neat.</p>

<p>Moving forward with the API, I want to do a couple key things. The first is to return JSON instead of that terrible XML. The second is to create a couple endpoints that will help with finding the right bus at the right location. I am always looking for help with this stuff - so if you have any ideas - please let me know in the comments.</p>

<p>So far, there are not a whole lot of applications using this API. The only ones I have thus far are:</p>

<ul>
    <li><a href="http://commuting.in/chicago/about">Commuting.in Chicago</a></li>
    <li><a href="http://txtful.com/template.html?templateId=1368034">txtful bus alerts</a></li>
    <li><a href="http://businfo.chicagobus.org/">ChicagoBus.org Bus Finder</a></li>
</ul>


<p>If you know of any others - let me know. I have a couple projects brewing myself that will hopefully add a shortcode, and a jabber bot for bus notifications and queries. Are there any things yall would like to see? I personally want a really solid native iphone app. It would be awesome to be able to have the iphone pinpoint your location and then tell you what the nearest buses are that are arriving soon. Also - replicating the bus tracker in an easier to use fashion would be excellent.</p>

<p>All of this API work wouldn't have been possible without the help of <a href="http://detour1999.com">Dylan Richard</a>, <a href="http://www.derivativeworks.com/">Dan X O'Neil</a> and <a href="http://chicagobus.org">Kevin Zolkiewicz</a>. The CTA has also been amazingly cool with all of this - I really like those guys.</p>

    <div class=" well well-small muted"> 
      <h3>Related posts</h3> 
      <ul class="unstyled">
      
      <li><a href="/2012/02/11/the-setup-harperreed-uses-this/">Me on The Setup: Harper Reed uses this.</a></li>
      
      <li><a href="/2011/10/02/busy/">BUSY! busy busy.</a></li>
      
      <li><a href="/2011/01/26/how-to-use-app-engine-to-host-static-sites-for-free/">OMG FREE HOSTING: How to use GAE to host static sites for free</a></li>
      
      <li><a href="/2011/01/01/2010-retrospective/">2010 Retrospective</a></li>
      
      <li><a href="/2010/12/07/lincoln-square-retrospective/">Lincoln Square Retrospective</a></li>
      
      </ul>
    </div> 
    <!-- discuss -->
    <div id="disqus_thread"></div>
    <script type="text/javascript">
    var disqus_identifier= '';
    var disqus_developer = 1;
    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://nata2.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=nata2">comments powered by Disqus.</a></noscript>
    <!-- end discuss -->
  </div>
</div>
</div>
        <div class="span4 well well-large sidebar muted">    <p><a href="http://www.catb.org/hacker-emblem/" target="_blank"><img style="padding-right: 5px; margin: 0px" src="http://media.nata2.org/images/glider.png" align="left"></a> <strong>Hi.</strong> My name is <a href="http://nata2.org/">Harper</a>. I am an engineer excited about real time, social software and the open source software movement. In a previous life, I was the CTO of the awesome <a href="http://www.threadless.com">Threadless</a>. I am patiently waiting for the singularity.</p>
<p>This is obviously my blog. I write about everything from (once) being a professional yoyoer to building big data infrastructure to hacking the newest Internet appliance. Be sure and check out my homepage at <a href="http://www.harperreed.org">harperreed.org</a>. If you are so interested, my resume is located <a href="http://www.harperreed.org/resume">here</a>. I love getting emails and what not so feel free to contact me through <a href="http://www.harperreed.org/contact">here</a>. </p>
<p>Be sure and take a gander at&nbsp;my <a href="http://flickr.com/photos/natatwo/">photos</a> and <a href="https://twitter.com/intent/follow?screen_name=harper" target="_blank">follow me on twitter</a>.</p>
<script>
var b=window,c=document,f=false;
function _click(d){    var a="status=0,scrollbars=0,menubar=0,statusbar=0,resizable=1, width=300,height=500,location="+(h()?"1":"0");b.open(d,"",a)}
function h(){if(b.ActiveXObject&&b.XMLHttpRequest){return false}return true};
</script>
<p>If you want to contact me <a name="s" target="_blank" href="http://www.google.com/talk/service/badge/Start?tk=z01q6amlqtujnl6pvfokj2one9hmtk497vg29vdfi6q0qfdaj57cn4kval4vg0deih01q0v2sbsveu8d51nvi9faiglrcc8ela57sp9e2urd0m04gc1vn2cdc8ppjt010vl2hok0dqsj1tjn99egtftuo92car714o27bltqt" id="chat-link">click here to start a chat.</a>
<div id="chat-wrapper-main" style="display:none;"></div>
</p>

    <div class="row">
      <div class="span2"><div class="Status"> 
    <h2><strong>Twitter Status</strong></h2> 
    <div id="twitter_div"> 
        <ul id="twitter_update_list"></ul> 
        <a href="https://twitter.com/intent/follow?screen_name=harper" id="twitter-link" style="display:block;text-align:right;">follow me on Twitter</a> 
    </div> 
</div> 
</div>
      <div class="span2"><script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript">
  google.load('search', '1');
  google.setOnLoadCallback(function() {
    google.search.CustomSearchControl.attachAutoCompletion(
      '005257232071038103009:chkzt6rraoc',
      document.getElementById('q'),
      'cse-search-box');
  });
</script>

 <div class="Search"> 
            <h2>Search</h2> 
            <form action="/search/" id="cse-search-box" class="form-search">
              <div>
                <input type="hidden" name="cx" value="005257232071038103009:chkzt6rraoc" />
                <input type="hidden" name="cof" value="FORID:11" />
                <input type="hidden" name="ie" value="UTF-8" />
                <input type="text" name="q" id="q" autocomplete="off" class="span2" />
                <input type="submit" class="btn" name="sa" value="Go" />
              </div>
            </form>
        </div> 
<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>
</div>
      <div class="span2"><div class="Archives">   
 <h2>Archives</h2> 
  <ul> 
    <li><a href="/archives/">Full archives</a></li>
    
  </ul>
</div>
</div>
      <div class="span2"><div class="Pictures"> 
    <h2>Pictures</h2> 
    <A href="http://www.flickr.com/photos/natatwo"><img src="http://flashandburn.net/flickrtools/50406951@N00/color:eeeeee/recent.png" border="0"></a> 
</div> 

</div>
    </div>

</div>
      </div>
      <div class="row">
        <div class="span10 "><p><a href="/">nata2.org</a> is &copy; 1997-2012 <a href="https://www.harperreed.org/contact/">Harper Reed</a>. Powered by <a href="http://jekyllrb.com/">Jekyll</a>, <a href="http://www.vim.org/">vim</a>, <a href="https://en.wikipedia.org/wiki/Markdown">markdown</a> and magic</p>
</div>
      </div>
    </div> <!-- /container -->
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.8/jquery-ui.min.js"></script>

<script type="text/javascript" src="http://media.nata2.org/js/scripts.js?8"></script>

 
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-70650-9");
pageTracker._trackPageview();
} catch(err) {}
</script>
 

<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/harper.json?callback=twitterCallback2&amp;count=8"></script>

<script type="text/javascript">
//<![CDATA[
(function() {
    var links = document.getElementsByTagName('a');
    var query = '?';
    for(var i = 0; i < links.length; i++) {
    if(links[i].href.indexOf('#disqus_thread') >= 0) {
        query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
    }
    }
    document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/nata2/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>

<script type="text/javascript">
var _sf_async_config={uid:5483,domain:"nata2.org"};
(function(){
  function loadChartbeat() {
    window._sf_endpt=(new Date()).getTime();
    var e = document.createElement('script');
    e.setAttribute('language', 'javascript');
    e.setAttribute('type', 'text/javascript');
    e.setAttribute('src',
       (("https:" == document.location.protocol) ? "https://s3.amazonaws.com/" : "http://") +
       "static.chartbeat.com/js/chartbeat.js");
    document.body.appendChild(e);
  }
  var oldonload = window.onload;
  window.onload = (typeof window.onload != 'function') ?
     loadChartbeat : function() { oldonload(); loadChartbeat(); };
})();
</script>

  </body>
</html>

</body>
</html>
